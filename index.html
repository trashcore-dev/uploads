<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>TrashUploader ‚Äì Secure Upload</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #0f031a;
      --bg-card: rgba(26, 10, 46, 0.75);
      --accent: #aaff00;
      --accent-glow: rgba(170, 255, 0, 0.4);
      --text-primary: #e0e0ff;
      --text-secondary: #b0b0d0;
      --danger: #ff4d6d;
      --success: #00f0a0;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background: linear-gradient(135deg, var(--bg-dark), #2a0a4d);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated background particles (subtle) */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 10% 20%, rgba(170,255,0,0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(106, 0, 255, 0.08) 0%, transparent 30%);
      pointer-events: none;
      z-index: 0;
    }

    .upload-box {
      background: var(--bg-card);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(170, 255, 0, 0.15);
      border-radius: 24px;
      padding: 32px 24px;
      width: 100%;
      max-width: 420px;
      text-align: center;
      position: relative;
      z-index: 10;
      box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(170, 255, 0, 0.1),
        inset 0 0 12px rgba(106, 0, 255, 0.15);
    }

    h1 {
      font-weight: 700;
      font-size: 2.1rem;
      margin-bottom: 24px;
      color: var(--accent);
      text-shadow: 0 0 12px var(--accent-glow);
      letter-spacing: -0.5px;
    }

    input[type="file"] {
      display: none;
    }

    label {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--accent);
      color: #0a0215;
      font-weight: 600;
      padding: 14px 28px;
      border-radius: 16px;
      cursor: pointer;
      font-size: 1.05rem;
      transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 4px 16px rgba(170, 255, 0, 0.3);
      margin-top: 8px;
      min-height: 52px;
      min-width: 180px;
      touch-action: manipulation;
    }

    label:hover {
      background: #ccff33;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(170, 255, 0, 0.45);
    }

    label:active {
      transform: translateY(0);
    }

    .progress {
      width: 100%;
      height: 10px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      margin: 24px 0 16px;
      overflow: hidden;
      display: none;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: var(--accent);
      border-radius: 10px;
      box-shadow: 0 0 8px var(--accent-glow);
      transition: width 0.3s ease;
    }

    .output {
      margin-top: 20px;
      font-size: 0.95rem;
      line-height: 1.5;
      min-height: 64px;
      color: var(--text-secondary);
    }

    .output a {
      color: var(--accent);
      text-decoration: none;
      word-break: break-all;
    }

    .output a:hover {
      text-decoration: underline;
    }

    button.copy {
      background: rgba(170, 255, 0, 0.15);
      color: var(--accent);
      border: 1px solid rgba(170, 255, 0, 0.3);
      border-radius: 12px;
      padding: 10px 20px;
      margin-top: 14px;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.2s ease;
      backdrop-filter: blur(4px);
    }

    button.copy:hover {
      background: rgba(170, 255, 0, 0.25);
      transform: scale(1.03);
    }

    .stats {
      margin-top: 28px;
      background: rgba(255, 255, 255, 0.04);
      padding: 14px;
      border-radius: 16px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .whatsapp-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #25d366;
      color: white;
      border: none;
      border-radius: 50px;
      padding: 14px 20px;
      font-weight: 600;
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 50;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 0.95rem;
      transition: transform 0.25s, box-shadow 0.25s;
      touch-action: manipulation;
    }

    .whatsapp-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(37, 211, 102, 0.5);
    }

    .loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      animation: pulse 1.6s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    @media (max-width: 480px) {
      .upload-box {
        padding: 24px 20px;
        margin: 0 8px;
      }

      h1 {
        font-size: 1.8rem;
      }

      label {
        padding: 14px 24px;
        font-size: 1rem;
        min-width: 160px;
      }

      .whatsapp-btn {
        bottom: 18px;
        right: 18px;
        padding: 12px 16px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <div class="upload-box">
    <h1> TrashUploader</h1>
    <form id="uploadForm">
      <input type="file" id="file" name="file" required />
      <label for="file"><i class="fas fa-file-upload"></i> Choose File</label>

      <div class="progress" id="progressContainer">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="output" id="output"></div>
    </form>

    <div class="stats">
       <b>Stats:</b><br />
       Successful: <span id="successCount">0</span> &nbsp; | &nbsp;
       Failed: <span id="failCount">0</span>
    </div>
  </div>

  <button class="whatsapp-btn" onclick="chatDev()">
    <i class="fab fa-whatsapp"></i> Chat Dev
  </button>

  <script>
    const fileInput = document.getElementById("file");
    const output = document.getElementById("output");
    const progressBar = document.getElementById("progressBar");
    const progressContainer = document.getElementById("progressContainer");
    const successCountEl = document.getElementById("successCount");
    const failCountEl = document.getElementById("failCount");

    let successCount = parseInt(localStorage.getItem("successCount") || "0");
    let failCount = parseInt(localStorage.getItem("failCount") || "0");
    updateStats();

    fileInput.addEventListener("change", async () => {
      const file = fileInput.files[0];
      if (!file) return;

      output.innerHTML = `<span class="loading"><i class="fas fa-spinner fa-spin"></i> Scanning file...</span>`;
      progressContainer.style.display = "none";
      progressBar.style.width = "0%";

      await new Promise(r => setTimeout(r, 1500));

      output.innerHTML = "‚úÖ Scan successful!<br>Preparing to upload...";
      await new Promise(r => setTimeout(r, 1000));

      progressContainer.style.display = "block";
      output.innerHTML = "üì§ Uploading file...";

      const formData = new FormData();
      formData.append("file", file);

      const xhr = new XMLHttpRequest();
xhr.open("POST", "https://trashuploads.zone.id/api/upload", true);

      xhr.upload.onprogress = (event) => {
        if (event.lengthComputable) {
          const percent = Math.round((event.loaded / event.total) * 100);
          progressBar.style.width = percent + "%";
        }
      };

      xhr.onload = () => {
        if (xhr.status === 200) {
          const data = JSON.parse(xhr.responseText);
          if (data.success) {
            successCount++;
            saveStats();
            output.innerHTML = `
              ‚úÖ <b>Upload Successful!</b><br><br>
              <b>Direct Link:</b><br>
              <a href="${data.url}" target="_blank">${data.url}</a><br>
              <button class="copy" onclick="copyLink('${data.url}')">
                <i class="fas fa-copy"></i> Copy Link
              </button>
            `;
          } else {
            failCount++;
            saveStats();
            output.innerHTML = `‚ùå Upload failed: ${data.error || "Unknown error"}`;
          }
        } else {
          failCount++;
          saveStats();
          output.innerHTML = `üí• Server Error: ${xhr.statusText}`;
        }
      };

      xhr.onerror = () => {
        failCount++;
        saveStats();
        output.innerHTML = `üí• Network Error: Could not connect to server.`;
      };

      xhr.send(formData);
    });

    function copyLink(url) {
      navigator.clipboard.writeText(url)
        .then(() => {
          const btn = document.querySelector("button.copy");
          if (btn) {
            const orig = btn.innerHTML;
            btn.innerHTML = `<i class="fas fa-check"></i> Copied!`;
            setTimeout(() => (btn.innerHTML = orig), 1800);
          }
        })
        .catch(() => alert("‚ùå Failed to copy link."));
    }

    function saveStats() {
      localStorage.setItem("successCount", successCount.toString());
      localStorage.setItem("failCount", failCount.toString());
      updateStats();
    }

    function updateStats() {
      successCountEl.textContent = successCount;
      failCountEl.textContent = failCount;
    }

    function chatDev() {
      const phone = "254104245659";
      const message = encodeURIComponent("Hi, I‚Äôd like to chat about TrashUploader üöÄ");
      window.open(`https://wa.me/${phone}?text=${message}`, "_blank");
    }
  </script>
</body>
</html>
